 const storeData = {
            books: [
                {
                    id: 1,
                    title: "The Art Of Being Perfect(Sanskrit)",
                    type: "Books",
                    verified: false,
                    logo: "https://sarvwigyan.github.io/resources/TheArtOfBeingPerfect.jpg",
                    shortDesc: "एषा पुस्तिका आत्मविकासस्य, चारित्रशुद्धेः, चित्तनिग्रहस्य च मार्गं प्रकाशयति। श्रद्धा, भक्तिः, तर्कः, भावना च — एतेषां समन्वयेन मानवस्य जीवने पूर्णत्वं साध्यते।",
                    longDesc: "‘पूर्णत्वकला’ नाम पुस्तकायाः विशेषता या अस्ति यत् सा केवलं बाह्यजीवनस्य नियमपरायणतां न उपदिशति, अपि तु अंतरङ्गस्य आध्यात्मिकविकासं प्रति मानवं प्रेरयति। एषा पुस्तिका श्रद्धाया, भक्तेः, तर्कस्य, भावनायाः च समुच्चयेन आत्मशुद्धिं, चित्तस्थैर्यं, जीवनस्य उद्देशपरिज्ञानं च बोधयति।",
                    images: [
                        "https://ia800903.us.archive.org/BookReader/BookReaderImages.php?zip=/28/items/the-art-of-being-perfect-1/The%20Art%20Of%20Being%20Perfect%20(1)_jp2.zip&file=The%20Art%20Of%20Being%20Perfect%20(1)_jp2/The%20Art%20Of%20Being%20Perfect%20(1)_0000.jp2&id=the-art-of-being-perfect-1&scale=4&rotate=0",
                        "https://sarvwigyan.github.io/resources/TheArtOfBeingPerfect.jpg",
                        "https://ia800903.us.archive.org/BookReader/BookReaderImages.php?zip=/28/items/the-art-of-being-perfect-1/The%20Art%20Of%20Being%20Perfect%20%281%29_jp2.zip&file=The%20Art%20Of%20Being%20Perfect%20%281%29_jp2/The%20Art%20Of%20Being%20Perfect%20%281%29_0001.jp2&id=the-art-of-being-perfect-1&scale=4&rotate=0",
                        "https://ia800903.us.archive.org/BookReader/BookReaderImages.php?zip=/28/items/the-art-of-being-perfect-1/The%20Art%20Of%20Being%20Perfect%20%281%29_jp2.zip&file=The%20Art%20Of%20Being%20Perfect%20%281%29_jp2/The%20Art%20Of%20Being%20Perfect%20%281%29_0002.jp2&id=the-art-of-being-perfect-1&scale=4&rotate=0",
                        "https://ia800903.us.archive.org/BookReader/BookReaderImages.php?zip=/28/items/the-art-of-being-perfect-1/The%20Art%20Of%20Being%20Perfect%20%281%29_jp2.zip&file=The%20Art%20Of%20Being%20Perfect%20%281%29_jp2/The%20Art%20Of%20Being%20Perfect%20%281%29_0053.jp2&id=the-art-of-being-perfect-1&scale=4&rotate=0",
                        "https://ia800903.us.archive.org/BookReader/BookReaderImages.php?zip=/28/items/the-art-of-being-perfect-1/The%20Art%20Of%20Being%20Perfect%20%281%29_jp2.zip&file=The%20Art%20Of%20Being%20Perfect%20%281%29_jp2/The%20Art%20Of%20Being%20Perfect%20%281%29_0054.jp2&id=the-art-of-being-perfect-1&scale=4&rotate=0"
                    ],
                    imageAlts: [
                        "Cover page of The Art of Being Perfect in Sanskrit",
                        "Illustration from The Art of Being Perfect in Sanskrit",
                        "First page of The Art of Being Perfect in Sanskrit",
                        "Second page of The Art of Being Perfect in Sanskrit",
                        "Page 53 of The Art of Being Perfect in Sanskrit",
                        "Page 54 of The Art of Being Perfect in Sanskrit"
                    ],
                    file: "https://sarvwigyan.github.io/resources/Books/The%20Art%20Of%20Being%20Perfect%20Sanskrit.pdf",
                    language: "Sanskrit"
                },
                {
                    id: 2,
                    title: "The Art Of Being Perfect(Hindi)",
                    type: "Books",
                    verified: false,
                    logo: "https://sarvwigyan.github.io/resources/TheArtOfBeingPerfect.jpg",
                    shortDesc: "यह पुस्तक आत्मविकास, विचारशीलता और जीवन की पूर्णता को प्राप्त करने की आध्यात्मिक दिशा दिखाती है।",
                    longDesc: "'पूर्णता की कला' एक प्रेरणादायक और आत्मगामी पुस्तक है जो व्यक्ति को अपने आंतरिक स्वरूप की खोज, आत्मशुद्धि और आध्यात्मिक उन्नयन की ओर मार्गदर्शन करती है।",
                    images: [
                        "https://ia600404.us.archive.org/BookReader/BookReaderImages.php?zip=/26/items/the-art-of-being-perfect_20250630/The%20Art%20Of%20Being%20Perfect_jp2.zip&file=The%20Art%20Of%20Being%20Perfect_jp2/The%20Art%20Of%20Being%20Perfect_0000.jp2&id=the-art-of-being-perfect_20250630&scale=4&rotate=0",
                        "https://sarvwigyan.github.io/resources/TheArtOfBeingPerfect.jpg",
                        "https://ia600404.us.archive.org/BookReader/BookReaderImages.php?zip=/26/items/the-art-of-being-perfect_20250630/The%20Art%20Of%20Being%20Perfect_jp2.zip&file=The%20Art%20Of%20Being%20Perfect_jp2/The%20Art%20Of%20Being%20Perfect_0001.jp2&id=the-art-of-being-perfect_20250630&scale=4&rotate=0",
                        "https://ia600404.us.archive.org/BookReader/BookReaderImages.php?zip=/26/items/the-art-of-being-perfect_20250630/The%20Art%20Of%20Being%20Perfect_jp2.zip&file=The%20Art%20Of%20Being%20Perfect_jp2/The%20Art%20Of%20Being%20Perfect_0002.jp2&id=the-art-of-being-perfect_20250630&scale=4&rotate=0"
                    ],
                    imageAlts: [
                        "Cover page of The Art of Being Perfect in Hindi",
                        "Illustration from The Art of Being Perfect in Hindi",
                        "First page of The Art of Being Perfect in Hindi",
                        "Second page of The Art of Being Perfect in Hindi"
                    ],
                    file: "https://sarvwigyan.github.io/resources/Books/The%20Art%20Of%20Being%20Perfect%20Hindi.pdf",
                    language: "Hindi"
                },
                {
                    id: 9,
                    title: "श्रीमद्भगवद्गीता",
                    type: "Books",
                    verified: true,
                    logo: "https://sarvwigyan.github.io/resources/bhagwadgeeta.png",
                    shortDesc: "श्रीमद्भगवद्गीता एक दिव्य ग्रंथ है जो कर्म, ज्ञान और भक्ति के माध्यम से जीवन के धर्म, उद्देश्य और मोक्ष की दिशा प्रदान करता है।",
                    longDesc: "श्रीमद्भगवद्गीता सनातन धर्म का सर्वश्रेष्ठ आध्यात्मिक ग्रंथ है, जो केवल एक युद्धभूमि पर दिए गए उपदेशों का संकलन नहीं, अपितु सम्पूर्ण मानवता के लिए जीवन, धर्म, कर्म, ज्ञान, भक्ति, योग, वैराग्य और मोक्ष का एक सार्वभौमिक मार्गदर्शन है।",
                    images: [
                        "https://sarvwigyan.github.io/resources/bhagwadgeeta.png",
                        "https://ia600201.us.archive.org/BookReader/BookReaderImages.php?zip=/19/items/20250629_20250629_1737/%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_jp2.zip&file=%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_jp2/%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_0000.jp2&id=20250629_20250629_1737&scale=4&rotate=0",
                        "https://ia600201.us.archive.org/BookReader/BookReaderImages.php?zip=/19/items/20250629_20250629_1737/%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_jp2.zip&file=%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_jp2/%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_0009.jp2&id=20250629_20250629_1737&scale=4&rotate=0",
                        "https://ia600201.us.archive.org/BookReader/BookReaderImages.php?zip=/19/items/20250629_20250629_1737/%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_jp2.zip&file=%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_jp2/%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_0016.jp2&id=20250629_20250629_1737&scale=4&rotate=0",
                        "https://ia600201.us.archive.org/BookReader/BookReaderImages.php?zip=/19/items/20250629_20250629_1737/%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_jp2.zip&file=%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_jp2/%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_0136.jp2&id=20250629_20250629_1737&scale=4&rotate=0",
                        "https://sarvwigyan.github.io/resources/mahabharat1.jpg",
                        "https://ia600201.us.archive.org/BookReader/BookReaderImages.php?zip=/19/items/20250629_20250629_1737/%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_jp2.zip&file=%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_jp2/%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_0113.jp2&id=20250629_20250629_1737&scale=4&rotate=0",
                        "https://sarvwigyan.github.io/resources/mahabharat2.jpg",
                        "https://ia600201.us.archive.org/BookReader/BookReaderImages.php?zip=/19/items/20250629_20250629_1737/%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_jp2.zip&file=%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_jp2/%E0%A4%AD%E0%A4%97%E0%A4%B5%E0%A4%A6%20%E0%A4%97%E0%A5%80%E0%A4%A4%E0%A4%BE_0087.jp2&id=20250629_20250629_1737&scale=4&rotate=0",
                        "https://sarvwigyan.github.io/resources/mahabharat3.jpg"
                    ],
                    imageAlts: [
                        "Cover page of Shrimad Bhagavad Gita in Hindi",
                        "First page of Shrimad Bhagavad Gita in Hindi",
                        "Page 9 of Shrimad Bhagavad Gita in Hindi",
                        "Page 16 of Shrimad Bhagavad Gita in Hindi",
                        "Page 136 of Shrimad Bhagavad Gita in Hindi",
                        "Illustration of Mahabharata scene 1",
                        "Page 113 of Shrimad Bhagavad Gita in Hindi",
                        "Illustration of Mahabharata scene 2",
                        "Page 87 of Shrimad Bhagavad Gita in Hindi",
                        "Illustration of Mahabharata scene 3"
                    ],
                    file: "https://sarvwigyan.github.io/resources/Books/Bhagwadgeeta.pdf",
                    language: "Hindi"
                },
                {
                    id: 10,
                    title: "स्कन्द पुराण",
                    type: "Books",
                    verified: true,
                    logo: "https://sarvwigyan.github.io/resources/Images/Skanda%20Puran%20FC.jpg",
                    shortDesc: "'स्कन्द पुराण' हिन्दू धर्म के 18 महापुराणों में सबसे विशाल पुराण है, जो भगवान शिव और उनके पुत्र स्कन्द (कार्तिकेय) के महात्म्य एवं लीलाओं का विस्तार से वर्णन करता है।",
                    longDesc: "स्कन्द पुराण हिन्दू धर्म के अठारह महापुराणों में सबसे विशाल और व्यापक ग्रंथ है, जिसमें लगभग 81,000 से अधिक श्लोक हैं और यह भगवान शिव के पुत्र भगवान स्कन्द (कार्तिकेय) की शिक्षाओं, लीलाओं और महात्म्य को केन्द्र में रखता है।",
                    images: [
                        "https://sarvwigyan.github.io/resources/Images/Skanda%20Puran%20FC.jpg",
                        "https://sarvwigyan.github.io/resources/skandpuran1.jpg",
                        "https://sarvwigyan.github.io/resources/skandpuran.jpg"
                    ],
                    imageAlts: [
                        "Cover page of Skanda Purana in Hindi",
                        "Illustration of Skanda Purana in Hindi",
                        "Illustration of Skanda Purana in Hindi",
                    ],
                    file: "https://archive.org/embed/skanda-puran-gita-press-gorakhpur",
                    language: "Hindi"
                },
                {
                    id: 11,
                    title: "भविष्य पुराण",
                    type: "Books",
                    verified: true,
                    logo: "https://sarvwigyan.github.io/resources/Images/Bhavishya%20Puran%20FC.jpg",
                    shortDesc: "'भविष्य पुराण' हिन्दू पुराणों में एक विशिष्ट ग्रंथ है जो भविष्यवाणियों, धर्म, और सांस्कृतिक परंपराओं का संगम है।",
                    longDesc: "भविष्य पुराण हिन्दू धर्म का एक प्राचीन ग्रंथ है जिसमें अतीत, वर्तमान और भविष्य से संबंधित कथाएँ, राजा-वंश, धर्मशास्त्र, नीति, चिकित्सा, योग, और विभिन्न युगों की भविष्यवाणियाँ समाहित हैं।",
                    images: ["https://sarvwigyan.github.io/resources/Images/Bhavishya%20Puran%20FC.jpg","https://sarvwigyan.github.io/resources/BhavishyaPuran.png"],
                    imageAlts: ["Cover page of Bhavishya Purana in Hindi", "Representation of Bhavishya Purana"],
                    file: "https://archive.org/embed/bhavishya-puran-gita-press-gorakhpur",
                    language: "Hindi"
                },
                {
                    id: 12,
                    title: "Charaka Samhita",
                    type: "Books",
                    verified: true,
                    logo: "https://ia801901.us.archive.org/BookReader/BookReaderImages.php?zip=/19/items/CharakaSamhitaTextWithEnglishTanslationP.V.Sharma/Charaka%20Samhita%20Text%20with%20English%20Tanslation%20-%20P.V.%20Sharma_jp2.zip&file=Charaka%20Samhita%20Text%20with%20English%20Tanslation%20-%20P.V.%20Sharma_jp2/Charaka%20Samhita%20Text%20with%20English%20Tanslation%20-%20P.V.%20Sharma_0000.jp2&id=CharakaSamhitaTextWithEnglishTanslationP.V.Sharma&scale=8&rotate=0",
                    shortDesc: "Charak Samhita English translation .Charak Samhita is an ancient Indian text on Ayurveda, the traditional system of medicine.",
                    longDesc: "Charak Samhita is one of the foundational texts of Ayurveda, detailing various aspects of health, disease, and treatment methods. This English translation makes it accessible to a wider audience interested in traditional Indian medicine. It covers topics such as anatomy, physiology, pathology, and therapeutic practices, providing insights into ancient medical knowledge and practices. This translation is by P.V. Sharma, a renowned scholar in the field of Ayurveda. It is a valuable resource for students, practitioners, and anyone interested in the history and principles of Ayurvedic medicine. The text emphasizes the holistic approach of Ayurveda, integrating physical, mental, and spiritual health. It also discusses the importance of diet, lifestyle, and herbal remedies in maintaining health and treating diseases. The Charak Samhita is considered a classic in Ayurvedic literature and continues to be studied and referenced in modern Ayurvedic practice.",
                    images: ["https://ia801901.us.archive.org/BookReader/BookReaderImages.php?zip=/19/items/CharakaSamhitaTextWithEnglishTanslationP.V.Sharma/Charaka%20Samhita%20Text%20with%20English%20Tanslation%20-%20P.V.%20Sharma_jp2.zip&file=Charaka%20Samhita%20Text%20with%20English%20Tanslation%20-%20P.V.%20Sharma_jp2/Charaka%20Samhita%20Text%20with%20English%20Tanslation%20-%20P.V.%20Sharma_0000.jp2&id=CharakaSamhitaTextWithEnglishTanslationP.V.Sharma&scale=8&rotate=0"],
                    imageAlts: ["Front Cover of Charaka Samhita"],
                    file: "https://archive.org/embed/CharakaSamhitaTextWithEnglishTanslationP.V.Sharma",
                    language: "English"
                },
                {
                    id: 25,
                    title: "विष्णु पुराण",
                    type: "Books",
                    verified: true,
                    logo: "https://sarvwigyan.github.io/resources/Images/Vishnu%20Puran%20Front%20Cover.jpg",
                    shortDesc: "विष्णु पुराण हिन्दू धर्म के प्रमुख अठारह पुराणों में से एक है, जो भगवान विष्णु को समर्पित है। इसमें सृष्टि की उत्पत्ति, ब्रह्मांड की रचना, समयचक्र, धर्म, नीति, अवतारों की कथाएं (विशेषतः श्रीराम और श्रीकृष्ण), समुद्र मंथन, पृथ्वी के भूगोल, राजवंशों का इतिहास, और कलियुग के लक्षणों का विस्तार से वर्णन है। यह पुराण भक्ति, ज्ञान और कर्मयोग का समन्वय प्रस्तुत करता है, तथा मोक्ष (आत्मिक मुक्ति) प्राप्त करने का मार्ग बताता है। इसका उद्देश्य धार्मिक, सामाजिक और आध्यात्मिक चेतना को जागृत करना है। ऋषि पाराशर द्वारा रचित यह पुराण वेदों की व्याख्या भी करता है और इसे वैष्णव परंपरा का आधारभूत ग्रंथ माना जाता है।",
                    longDesc: "विष्णु पुराण हिंदू धर्म के अठारह महापुराणों में एक अत्यंत महत्वपूर्ण और पवित्र ग्रंथ है, जो संपूर्ण ब्रह्मांड की रचना, संचालन और संहार की प्रक्रिया को भगवान विष्णु के माध्यम से समझाने वाला एक अत्यंत व्यापक और दार्शनिक ग्रंथ है; इसका प्रत्येक श्लोक न केवल धार्मिक आस्था का प्रतिबिंब है बल्कि गहन सांस्कृतिक, आध्यात्मिक और दार्शनिक ज्ञान का स्रोत भी है, इसकी रचना महर्षि पराशर ने की थी जिन्होंने अपने पुत्र महर्षि व्यास को यह अमूल्य ज्ञान प्रदान किया और इस ग्रंथ के माध्यम से उन्होंने संसार के समस्त रहस्यों को उजागर किया, यह पुराण न केवल भगवान विष्णु की महिमा का गुणगान करता है अपितु यह बताता है कि सम्पूर्ण ब्रह्मांड उन्हीं से उत्पन्न होता है, उन्हीं में स्थित है और अंततः उन्हीं में लीन हो जाता है, इस पुराण के कुल 6 अंश और 126 अध्याय हैं जिनमें सृष्टि की उत्पत्ति, विभिन्न कल्पों का वर्णन, मन्वंतर, विविध अवतारों की गाथाएं, समुद्र मंथन की कथा, धर्म और अधर्म का संघर्ष, पाताल और स्वर्ग लोक का वर्णन, चार युगों की व्याख्या, कलियुग के लक्षण, लोकाचार, आचारशास्त्र, गृहस्थ और संन्यासी के कर्तव्य, यज्ञ, तप, ब्रह्मचर्य, दान, श्रद्धा, भक्ति, मोक्ष तथा ब्रह्मज्ञान का अद्वितीय समन्वय देखने को मिलता है, इसमें विष्णु के दशावतार – मत्स्य, कूर्म, वराह, नृसिंह, वामन, परशुराम, राम, कृष्ण, बुद्ध और कल्कि – की गाथाएं अत्यंत विस्तृत रूप से वर्णित हैं जो यह दर्शाती हैं कि जब-जब पृथ्वी पर पाप और अधर्म बढ़ा, तब-तब विष्णु ने विभिन्न रूपों में अवतार लेकर संतों, धर्म और सृष्टि की रक्षा की, यह ग्रंथ केवल पौराणिक घटनाओं का संकलन नहीं बल्कि उसमें छिपे प्रतीकों और उपदेशों के माध्यम से मनुष्य के जीवन को दिव्यता की ओर ले जाने का माध्यम है, इसमें समुद्र मंथन की कथा केवल एक घटना नहीं बल्कि अमृत और विष के प्रतीक के रूप में आत्मा के भीतर चलने वाले संघर्ष को दर्शाती है, यह बताता है कि कैसे देवता और दैत्य हमारे भीतर ही हैं और अंततः देवत्व की विजय ही मोक्ष का मार्ग है, विष्णु पुराण समय और काल की अवधारणाओं को भी दार्शनिक दृष्टिकोण से प्रस्तुत करता है जहां समय न केवल भौतिक परिवर्तन है अपितु आत्मिक यात्रा का भी आयाम है, इसमें धर्म के चार स्तंभ – सत्य, दया, तप और दान – को जीवन का मूल आधार बताया गया है, इसके अनुसार सच्चा धर्म वही है जो सबके हित की कामना करता है, यह पुराण पृथ्वी के भूगोल को मेरु पर्वत, सप्तद्वीप, सप्तसागर, भुवन मंडल आदि के माध्यम से चित्रित करता है जो कि उस काल की वैज्ञानिक और सांस्कृतिक चेतना को दर्शाता है, इसमें चंद्रवंश और सूर्यवंश के राजाओं का इतिहास, उनके गुण, चरित्र, राज्य व्यवस्था और धर्म पालन की कथाएं भी दी गई हैं जो भारतीय इतिहास का गौरवशाली परिचय देती हैं, विशेषकर भगवान श्रीकृष्ण की कथा अत्यंत व्यापक रूप से दी गई है जो महाभारत, भागवत पुराण और विष्णु पुराण तीनों में समान रूप से पूज्यनीय रूप में विद्यमान है, विष्णु पुराण केवल भगवान विष्णु की स्तुति तक सीमित नहीं बल्कि यह सम्पूर्ण सनातन धर्म के मूल तत्वों – वेद, उपनिषद, स्मृति, दर्शन और भक्ति योग – का सार है, इसमें वर्णाश्रम धर्म की संकल्पना को सामाजिक संतुलन के रूप में प्रस्तुत किया गया है न कि भेदभाव के रूप में, इसके अनुसार व्यक्ति का कर्म ही उसका धर्म है और वह अपने कर्तव्य पालन से ही ईश्वर की प्राप्ति कर सकता है, यह ग्रंथ आत्मा की अमरता, पुनर्जन्म, कर्मफल सिद्धांत और परमात्मा की सर्वव्यापकता पर बल देता है, इसमें बतलाया गया है कि आत्मा न जन्म लेती है न मरती है, वह केवल देह बदलती है जैसे मनुष्य पुराने वस्त्रों को त्यागकर नए वस्त्र पहनता है, इसी प्रकार आत्मा भी एक शरीर से दूसरे शरीर की ओर गतिशील रहती है, मोक्ष की प्राप्ति वही कर सकता है जो अपने भीतर के अज्ञान, राग-द्वेष और मोह को त्यागकर परमात्मा के स्वरूप को जानता है, विष्णु पुराण यह भी सिखाता है कि ईश्वर प्राप्ति के लिए न तो जंगलों में भागना आवश्यक है और न ही केवल यज्ञ-हवन करना, बल्कि सच्ची भक्ति, सेवा, समर्पण, सत्कर्म और अपने कर्तव्यों का ईमानदारी से पालन करना ही भगवान विष्णु की सच्ची पूजा है, इस ग्रंथ में पृथ्वी को “विष्णुपद” कहा गया है – अर्थात वह स्थान जहां भगवान स्वयं निवास करते हैं, यहाँ प्रकृति, जीव और ब्रह्म के अद्वैत भाव को सर्वोपरि माना गया है और कहा गया है कि जब भक्त अपने अहंकार और इच्छाओं का त्याग कर देता है, तब वह स्वयं भगवान के समान हो जाता है, विष्णु पुराण में ब्रह्मा, शिव और विष्णु को एक ही तत्त्व के तीन स्वरूप बताया गया है – ब्रह्मा सृष्टिकर्ता, विष्णु पालनकर्ता और शिव संहारकर्ता हैं, लेकिन इन तीनों की चेतना एक ही ब्रह्म में विलीन होती है, यह त्रैतीय भाव उपनिषदों की अद्वैत विचारधारा से गहरे रूप से जुड़ा हुआ है, यह पुराण केवल धार्मिक ग्रंथ नहीं बल्कि एक जीवंत और शाश्वत दर्शन है जो आज के युग में भी उतना ही प्रासंगिक है जितना कि सहस्त्रों वर्ष पूर्व था, यह मानव जीवन के प्रत्येक पहलू – भौतिक, मानसिक, सामाजिक, आध्यात्मिक – का संतुलन स्थापित करता है, और जीवन को ईश्वर के प्रति समर्पण, कर्तव्यपालन और सत्य की खोज की ओर प्रेरित करता है, वास्तव में विष्णु पुराण केवल एक ग्रंथ नहीं बल्कि ईश्वर के निकट जाने की सीढ़ी है, आत्मा की यात्रा का दर्पण है और धर्म, भक्ति तथा ज्ञान का अनंत स्रोत है।",
                    images: ["https://sarvwigyan.github.io/resources/Images/Vishnu%20Puran%20Front%20Cover.jpg"],
                    imageAlts: ["विष्णु पुराण का मुखपृष्ठ"],
                    file: "https://archive.org/embed/vishnu-puran-illustrated-with-hindi-translations-gita-press-gorakhpur",
                    language: "Hindi"
                }
            ],
            chelp: [
                {
                    id: 3,
                    title: "HelpHub",
                    type: "Tools",
                    verified: true,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Quick assistance guide.",
                    longDesc: "Your go-to guide for quick assistance and support.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of HelpHub tool interface"],
                    file: "helphub.apk"
                },
                {
                    id: 4,
                    title: "TechAid",
                    type: "Tools",
                    verified: false,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Solve tech issues.",
                    longDesc: "Solve tech issues with this handy support app.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of TechAid tool interface"],
                    file: "techaid.apk"
                },
                {
                    id: 13,
                    title: "CodeMaster",
                    type: "Tools",
                    verified: true,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Coding assistant.",
                    longDesc: "Boost your coding skills with this tool.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of CodeMaster tool interface"],
                    file: "codemaster.apk"
                },
                {
                    id: 14,
                    title: "DebugPro",
                    type: "Tools",
                    verified: false,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Debug easily.",
                    longDesc: "A tool to help you debug code efficiently.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of DebugPro tool interface"],
                    file: "debugpro.apk"
                },
                {
                    id: 15,
                    title: "ScriptGenix",
                    type: "Tools",
                    verified: true,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Generate scripts.",
                    longDesc: "Automate script creation with this utility.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of ScriptGenix tool interface"],
                    file: "scriptgenix.apk"
                },
                {
                    id: 16,
                    title: "API Helper",
                    type: "Tools",
                    verified: false,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "API testing tool.",
                    longDesc: "Test and explore APIs with ease.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of API Helper tool interface"],
                    file: "apihelper.apk"
                }
            ],
            games: [
                {
                    id: 5,
                    title: "Puzzle Master",
                    type: "Games",
                    verified: true,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Challenging puzzles.",
                    longDesc: "Test your brain with these challenging puzzles.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of Puzzle Master game"],
                    file: "puzzle.apk"
                },
                {
                    id: 6,
                    title: "Adventure Quest",
                    type: "Games",
                    verified: false,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Epic adventures await.",
                    longDesc: "Embark on epic adventures in this RPG game.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of Adventure Quest game"],
                    file: "adventure.apk"
                },
                {
                    id: 17,
                    title: "Space Shooter",
                    type: "Games",
                    verified: true,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Shoot aliens!",
                    longDesc: "Defend the galaxy in this action-packed shooter.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of Space Shooter game"],
                    file: "spaceshooter.apk"
                },
                {
                    id: 18,
                    title: "Racing Rush",
                    type: "Games",
                    verified: false,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Race to win.",
                    longDesc: "Speed through tracks in this racing game.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of Racing Rush game"],
                    file: "racingrush.apk"
                },
                {
                    id: 19,
                    title: "Trivia King",
                    type: "Games",
                    verified: true,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Test your knowledge.",
                    longDesc: "Challenge yourself with trivia questions.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of Trivia King game"],
                    file: "triviaking.apk"
                },
                {
                    id: 20,
                    title: "Platform Jumper",
                    type: "Games",
                    verified: false,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Jump to survive.",
                    longDesc: "Navigate platforms in this fun game.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of Platform Jumper game"],
                    file: "platformjumper.apk"
                }
            ],
            productivity: [
                {
                    id: 7,
                    title: "Task Manager",
                    type: "Productivity",
                    verified: true,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Organize your tasks.",
                    longDesc: "Stay organized with this powerful task manager.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of Task Manager app"],
                    file: "taskmanager.apk"
                },
                {
                    id: 8,
                    title: "Note Taker",
                    type: "Productivity",
                    verified: false,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Take notes easily.",
                    longDesc: "Capture your thoughts with this simple note-taking app.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of Note Taker app"],
                    file: "notetaker.apk"
                },
                {
                    id: 21,
                    title: "Time Tracker",
                    type: "Productivity",
                    verified: true,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Track your time.",
                    longDesc: "Monitor your productivity with this tool.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of Time Tracker app"],
                    file: "timetracker.apk"
                },
                {
                    id: 22,
                    title: "Goal Setter",
                    type: "Productivity",
                    verified: false,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Set your goals.",
                    longDesc: "Plan and achieve your objectives.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of Goal Setter app"],
                    file: "goalsetter.apk"
                },
                {
                    id: 23,
                    title: "Calendar Pro",
                    type: "Productivity",
                    verified: true,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Manage events.",
                    longDesc: "Keep your schedule in check.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of Calendar Pro app"],
                    file: "calendarpro.apk"
                },
                {
                    id: 24,
                    title: "Focus Timer",
                    type: "Productivity",
                    verified: false,
                    logo: "https://via.placeholder.com/64",
                    shortDesc: "Boost focus.",
                    longDesc: "Use Pomodoro technique to stay focused.",
                    images: ["https://via.placeholder.com/200x120"],
                    imageAlts: ["Screenshot of Focus Timer app"],
                    file: "focustimer.apk"
                }
            ]
        };
        const featured = [
            storeData.books[0],
            storeData.chelp[0],
            storeData.games[0],
            storeData.productivity[0],
            storeData.books[2],
            storeData.chelp[2]
        ];
        function readBook(item) {
            if (!item.file || item.file === '') {
                alert('Sorry, the book is not available for reading at this time.');
                return;
            }
            const modal = document.getElementById('bookModal');
            const iframe = document.getElementById('bookIframe');
            const overlay = document.getElementById('overlay');
            iframe.src = item.file;
            modal.classList.add('active');
            overlay.classList.add('active');
            try {
                if (!document.fullscreenElement) {
                    modal.requestFullscreen().catch(err => {
                        console.error(`Error enabling full-screen mode: ${err.message}`);
                        alert('Full-screen mode could not be enabled. Displaying in modal instead.');
                    });
                }
            } catch (e) {
                console.error(`Full-screen error: ${e.message}`);
                alert('Full-screen mode is not supported in this browser. Displaying in modal instead.');
            }
        }
        function closeBookModal() {
            const modal = document.getElementById('bookModal');
            const iframe = document.getElementById('bookIframe');
            const overlay = document.getElementById('overlay');
            modal.classList.remove('active');
            overlay.classList.remove('active');
            iframe.src = '';
            if (document.fullscreenElement) {
                document.exitFullscreen().catch(err => {
                    console.error(`Error exiting full-screen mode: ${err.message}`);
                });
            }
        }
        function downloadAndOpenFile(item) {
            const filePath = item.file;
            if (!filePath || filePath === '') {
                alert('Sorry, the file is not available for download at this time.');
                return;
            }
            const fileName = filePath.split('/').pop();
            const link = document.createElement('a');
            link.href = filePath;
            link.download = fileName;
            document.body.appendChild(link);
            try {
                link.click();
                document.body.removeChild(link);
                setTimeout(() => {
                    const shouldOpen = confirm(`"${fileName}" has been downloaded. Would you like to open it now?`);
                    if (shouldOpen) {
                        try {
                            window.open(filePath, '_blank');
                        } catch (e) {
                            alert('Unable to open the file. Please check if it is supported by your browser.');
                        }
                    }
                }, 1000);
            } catch (e) {
                document.body.removeChild(link);
                alert('Download failed. Please try again later.');
            }
        }
        function renderCards(data, containerId) {
            const container = document.getElementById(containerId);
            if (!container) {
                console.error(`Container not found: ${containerId}`);
                return;
            }
            container.innerHTML = '';
            const noResultsId = containerId.replace('Grid', 'NoResults');
            const noResultsElement = document.getElementById(noResultsId);
            if (!data || data.length === 0) {
                if (noResultsElement) {
                    noResultsElement.style.display = 'block';
                }
                return;
            }
            if (noResultsElement) {
                noResultsElement.style.display = 'none';
            }
            data.forEach(item => {
                const card = document.createElement('div');
                card.className = 'card';
                card.setAttribute('role', 'button');
                card.setAttribute('tabindex', '0');
                card.setAttribute('aria-label', `View details for ${item.title}`);
                const buttonText = item.type === 'Books' ? 'Read' : 'Download';
                card.innerHTML = `
                    <img class="card-logo" src="${item.logo}" alt="${item.title} logo">
                    <div class="card-title">${item.title}</div>
                    <div class="card-type">${item.type}</div>
                    <button class="card-download" aria-label="${buttonText} ${item.title}">${buttonText}</button>
                `;
                card.addEventListener('click', (e) => {
                    if (e.target.className !== 'card-download') showDetail(item);
                });
                card.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        showDetail(item);
                    }
                });
                                card.querySelector('.card-download').addEventListener('click', () => {
                    if (item.type === 'Books') {
                        readBook(item);
                    } else {
                        downloadAndOpenFile(item);
                    }
                });
                container.appendChild(card);
            });
        }

        function showDetail(item) {
            const detailView = document.getElementById('detailView');
            const overlay = document.getElementById('overlay');
            const detailLogo = document.getElementById('detailLogo');
            const detailTitle = document.getElementById('detailTitle');
            const detailType = document.getElementById('detailType');
            const detailVerified = document.getElementById('detailVerified');
            const detailDownload = document.getElementById('detailDownload');
            const detailShortDesc = document.getElementById('detailShortDesc');
            const detailLongDesc = document.getElementById('detailLongDesc');
            const detailImages = document.getElementById('detailImages');

            detailLogo.src = item.logo;
            detailLogo.alt = `${item.title} logo`;
            detailTitle.textContent = item.title;
            detailType.textContent = item.type;
            detailVerified.textContent = item.verified ? '✓ Verified' : '';
            detailShortDesc.textContent = item.shortDesc;
            detailLongDesc.textContent = item.longDesc;

            detailImages.innerHTML = '';
            item.images.forEach((imgSrc, index) => {
                const img = document.createElement('img');
                img.src = imgSrc;
                img.alt = item.imageAlts[index] || `Image ${index + 1} for ${item.title}`;
                detailImages.appendChild(img);
            });

            detailDownload.textContent = item.type === 'Books' ? 'Read' : 'Download';
            detailDownload.onclick = () => {
                if (item.type === 'Books') {
                    readBook(item);
                } else {
                    downloadAndOpenFile(item);
                }
            };

            detailView.classList.add('active');
            overlay.classList.add('active');

            addToRecent(item);
        }

        function addToRecent(item) {
            let recentItems = JSON.parse(localStorage.getItem('recentItems') || '[]');
            recentItems = recentItems.filter(i => i.id !== item.id);
            recentItems.unshift(item);
            if (recentItems.length > 10) {
                recentItems.pop();
            }
            localStorage.setItem('recentItems', JSON.stringify(recentItems));
            renderCards(recentItems, 'recentGrid');
        }

        function addToFavorites(item) {
            let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            if (!favorites.some(f => f.id === item.id)) {
                favorites.push(item);
                localStorage.setItem('favorites', JSON.stringify(favorites));
                renderFavorites();
            }
        }

        function removeFromFavorites(itemId) {
            let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            favorites = favorites.filter(f => f.id !== itemId);
            localStorage.setItem('favorites', JSON.stringify(favorites));
            renderFavorites();
        }

        function renderFavorites() {
            const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            renderCards(favorites, 'favoritesGrid');
            const favoritesTab = document.querySelector('.tab[data-tab="favorites"]');
            if (favoritesTab) {
                favoritesTab.style.display = favorites.length > 0 ? 'block' : 'none';
            }
        }

        function closeDetail() {
            const detailView = document.getElementById('detailView');
            const overlay = document.getElementById('overlay');
            detailView.classList.remove('active');
            // Only deactivate overlay if no other modals are active
            if (!document.getElementById('bookModal').classList.contains('active') &&
                !document.getElementById('settingsWindow').classList.contains('active')) {
                overlay.classList.remove('active');
            }
        }

        function closeBookModal() {
            const modal = document.getElementById('bookModal');
            const iframe = document.getElementById('bookIframe');
            const overlay = document.getElementById('overlay');
            modal.classList.remove('active');
            iframe.src = '';
            if (document.fullscreenElement) {
                document.exitFullscreen().catch(err => {
                    console.error(`Error exiting full-screen mode: ${err.message}`);
                });
            }
            // Only deactivate overlay if no other modals are active
            if (!document.getElementById('detailView').classList.contains('active') &&
                !document.getElementById('settingsWindow').classList.contains('active')) {
                overlay.classList.remove('active');
            }
        }

        function toggleSettings() {
            const settingsWindow = document.getElementById('settingsWindow');
            const overlay = document.getElementById('overlay');
            settingsWindow.classList.toggle('active');
            // Only activate/deactivate overlay if no other modals are active
            if (settingsWindow.classList.contains('active')) {
                overlay.classList.add('active');
            } else if (!document.getElementById('detailView').classList.contains('active') &&
                       !document.getElementById('bookModal').classList.contains('active')) {
                overlay.classList.remove('active');
            }
        }

        function saveSettings() {
            const theme = document.getElementById('theme').value;
            const enableFavorites = document.getElementById('enableFavorites').checked;
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            localStorage.setItem('enableFavorites', enableFavorites);
            const favoritesTab = document.querySelector('.tab[data-tab="favorites"]');
            if (favoritesTab) {
                favoritesTab.style.display = enableFavorites ? 'block' : 'none';
            }
            toggleSettings();
        }

        function initTabs() {
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => {
                        t.classList.remove('active');
                        t.setAttribute('aria-selected', 'false');
                    });
                    tab.classList.add('active');
                    tab.setAttribute('aria-selected', 'true');

                    const sections = document.querySelectorAll('.section');
                    sections.forEach(section => section.classList.remove('active'));

                    const sectionId = tab.getAttribute('data-tab');
                    const section = document.getElementById(sectionId);
                    if (section) {
                        section.classList.add('active');
                    }

                    if (sectionId === 'books') {
                        handleMainFilterChange();
                    }
                });
                tab.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        tab.click();
                    }
                });
            });
        }

        function initSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', () => {
                const query = searchInput.value.toLowerCase();
                const activeTab = document.querySelector('.tab.active').getAttribute('data-tab');
                let dataToSearch = [];

                if (activeTab === 'all') {
                    dataToSearch = [
                        ...storeData.books,
                        ...storeData.chelp,
                        ...storeData.games,
                        ...storeData.productivity
                    ];
                } else if (activeTab === 'recent') {
                    dataToSearch = JSON.parse(localStorage.getItem('recentItems') || '[]');
                } else if (activeTab === 'favorites') {
                    dataToSearch = JSON.parse(localStorage.getItem('favorites') || '[]');
                } else {
                    dataToSearch = storeData[activeTab] || [];
                }

                const filteredData = dataToSearch.filter(item =>
                    item.title.toLowerCase().includes(query) ||
                    item.shortDesc.toLowerCase().includes(query)
                );

                renderCards(filteredData, `${activeTab}Grid`);
            });
        }

        function initSettings() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            const savedEnableFavorites = localStorage.getItem('enableFavorites') === 'true';
            document.documentElement.setAttribute('data-theme', savedTheme);
            document.getElementById('theme').value = savedTheme;
            document.getElementById('enableFavorites').checked = savedEnableFavorites;
            const favoritesTab = document.querySelector('.tab[data-tab="favorites"]');
            if (favoritesTab) {
                favoritesTab.style.display = savedEnableFavorites ? 'block' : 'none';
            }
        }

        function toggleLanguageDropdown() {
            const dropdown = document.getElementById('languageCheckboxes');
            const arrow = document.getElementById('langDropdownArrow');
            const isOpen = dropdown.style.display === 'block';
            dropdown.style.display = isOpen ? 'none' : 'block';
            arrow.classList.toggle('rotate', !isOpen);
        }

        function toggleAllLanguages(checkbox) {
            const langCheckboxes = document.querySelectorAll('.lang-checkbox');
            langCheckboxes.forEach(cb => cb.checked = checkbox.checked);
            updateSelectedLanguagesLabel();
            filterBooksByLanguage();
        }

        function updateSelectedLanguagesLabel() {
            const selected = Array.from(document.querySelectorAll('.lang-checkbox:checked'))
                .map(cb => cb.value.charAt(0).toUpperCase() + cb.value.slice(1));
            const label = document.getElementById('selectedLanguagesLabel');
            label.textContent = selected.length > 0 ? selected.join(', ') : 'Select Language';
        }

        function filterBooksByLanguage() {
            const selectedLanguages = Array.from(document.querySelectorAll('.lang-checkbox:checked'))
                .map(cb => cb.value.toLowerCase());
            const filteredBooks = storeData.books.filter(book =>
                selectedLanguages.length === 0 ||
                selectedLanguages.includes(book.language.toLowerCase())
            );
            renderCards(filteredBooks, 'booksGrid');
        }

        function handleMainFilterChange() {
            const filterValue = document.getElementById('booksFilter').value;
            const languageFilterWrapper = document.getElementById('languageFilterWrapper');
            const mainFilterArrow = document.getElementById('mainFilterArrow');
            mainFilterArrow.classList.toggle('rotate', filterValue !== '');

            if (filterValue === 'language') {
                languageFilterWrapper.style.display = 'block';
                filterBooksByLanguage();
            } else {
                languageFilterWrapper.style.display = 'none';
                renderCards(storeData.books, 'booksGrid');
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderCards([...storeData.books, ...storeData.chelp, ...storeData.games, ...storeData.productivity], 'allGrid');
            renderCards(storeData.books, 'booksGrid');
            renderCards(storeData.chelp, 'chelpGrid');
            renderCards(storeData.games, 'gamesGrid');
            renderCards(storeData.productivity, 'productivityGrid');
            renderCards(featured, 'featuredGrid');
            renderCards(JSON.parse(localStorage.getItem('recentItems') || '[]'), 'recentGrid');
            renderFavorites();

            initTabs();
            initSearch();
            initSettings();

            document.getElementById('closeBtn').addEventListener('click', closeDetail);
            document.getElementById('bookModalClose').addEventListener('click', closeBookModal);
            document.getElementById('settingsIcon').addEventListener('click', toggleSettings);
            document.getElementById('saveSettings').addEventListener('click', saveSettings);

            // Updated overlay click handler
            document.getElementById('overlay').addEventListener('click', (e) => {
                // Prevent closing if clicking on a modal itself
                if (e.target === document.getElementById('overlay')) {
                    const detailView = document.getElementById('detailView');
                    const bookModal = document.getElementById('bookModal');
                    const settingsWindow = document.getElementById('settingsWindow');

                    // Close modals in order of priority (topmost first)
                    if (bookModal.classList.contains('active')) {
                        closeBookModal();
                    } else if (settingsWindow.classList.contains('active')) {
                        toggleSettings();
                    } else if (detailView.classList.contains('active')) {
                        closeDetail();
                    }
                }
            });

            document.querySelectorAll('.lang-checkbox').forEach(cb => {
                cb.addEventListener('change', () => {
                    const selectAll = document.getElementById('selectAllLanguages');
                    selectAll.checked = document.querySelectorAll('.lang-checkbox').length ===
                        document.querySelectorAll('.lang-checkbox:checked').length;
                    updateSelectedLanguagesLabel();
                    filterBooksByLanguage();
                });
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    const bookModal = document.getElementById('bookModal');
                    const settingsWindow = document.getElementById('settingsWindow');
                    const detailView = document.getElementById('detailView');
                    const dropdown = document.getElementById('languageCheckboxes');

                    // Close modals in order of priority
                    if (bookModal.classList.contains('active')) {
                        closeBookModal();
                    } else if (settingsWindow.classList.contains('active')) {
                        toggleSettings();
                    } else if (detailView.classList.contains('active')) {
                        closeDetail();
                    } else if (dropdown.style.display === 'block') {
                        toggleLanguageDropdown();
                    }
                }
            });
        });